{"version":3,"sources":["webpack:///./node_modules/@ionic/core/dist/esm/es5/build/tap-click.js"],"names":["__webpack_require__","r","__webpack_exports__","d","startTapClick","_chunk_e7816c0b_js__WEBPACK_IMPORTED_MODULE_0__","doc","activatableEle","activeDefer","lastTouch","MOUSE_WAIT","lastActivated","cancelled","scrolling","clearDefers","WeakMap","onBodyClick","ev","preventDefault","stopPropagation","onTouchStart","Object","pointerDown","onTouchEnd","pointerUp","onMouseDown","t","onMouseUp","cancelActive","clearTimeout","undefined","removeActivated","setActivatedElement","getActivatableTarget","cancelable","el","_a","x","y","has","Error","classList","contains","ACTIVATED","addActivated","deferId","get","delete","remove","setTimeout","ADD_ACTIVATED_DEFERS","Date","now","add","rippleEffect","getRippleEffect","addRipple","smooth","active","time","CLEAR_STATE_DEFERS","set","body","addEventListener","composedPath","target","closest","path","i","length","hasAttribute","shadowRoot","ripple","querySelector"],"mappings":"gHAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,kCAAAE,IAAA,IAAAC,EAAAL,EAAA,QACA,SAAAI,EAAAE,GACA,IAIAC,EACAC,EALAC,EAAA,IAAAC,EACAC,EAAA,EACAC,GAAA,EACAC,GAAA,EAGAC,EAAA,IAAAC,QACA,SAAAC,EAAAC,IACAL,GAAAC,KACAI,EAAAC,iBACAD,EAAAE,mBAGA,SAAAC,EAAAH,GACAR,EAAoBY,OAAAhB,EAAA,KAAAgB,CAAGJ,GACvBK,EAAAL,GAEA,SAAAM,EAAAN,GACAR,EAAoBY,OAAAhB,EAAA,KAAAgB,CAAGJ,GACvBO,EAAAP,GAEA,SAAAQ,EAAAR,GACA,IAAAS,EAAgBL,OAAAhB,EAAA,KAAAgB,CAAGJ,GAAAP,EACnBD,EAAAiB,GACAJ,EAAAL,GAGA,SAAAU,EAAAV,GACA,IAAAS,EAAgBL,OAAAhB,EAAA,KAAAgB,CAAGJ,GAAAP,EACnBD,EAAAiB,GACAF,EAAAP,GAGA,SAAAW,IACAC,aAAArB,GACAA,OAAAsB,EACAvB,IACAwB,GAAA,GACAxB,OAAAuB,GAEAlB,GAAA,EAEA,SAAAU,EAAAL,GACAV,GAAAM,IAGAD,GAAA,EACAoB,EAAAC,EAAAhB,OAEA,SAAAO,EAAAP,GACAJ,IAGAmB,OAAAF,EAAAb,GACAL,GAAAK,EAAAiB,YACAjB,EAAAC,kBAGA,SAAAc,EAAAG,EAAAlB,GACA,IAAAkB,OAAA5B,EAAA,CAGAsB,aAAArB,GACAA,OAAAsB,EACA,IAAAM,EAAiBf,OAAAhB,EAAA,KAAAgB,CAAYJ,GAAAoB,EAAAD,EAAAC,EAAAC,EAAAF,EAAAE,EAC7B,GAAA/B,EAAA,CACA,GAAAO,EAAAyB,IAAAhC,GACA,UAAAiC,MAAA,kBAEAjC,EAAAkC,UAAAC,SAAAC,IACAC,EAAArC,EAAA8B,EAAAC,GAEAP,GAAA,GAEA,GAAAI,EAAA,CACA,IAAAU,EAAA/B,EAAAgC,IAAAX,GACAU,IACAhB,aAAAgB,GACA/B,EAAAiC,OAAAZ,IAEAA,EAAAM,UAAAO,OAAAL,GACAnC,EAAAyC,WAAA,WACAL,EAAAT,EAAAE,EAAAC,GACA9B,OAAAsB,GACaoB,GAEb3C,EAAA4B,GAEA,SAAAS,EAAAT,EAAAE,EAAAC,GACA3B,EAAAwC,KAAAC,MACAjB,EAAAM,UAAAY,IAAAV,GACA,IAAAW,EAAAC,EAAApB,GACAmB,KAAAE,WACAF,EAAAE,UAAAnB,EAAAC,GAGA,SAAAP,EAAA0B,GACA,IAAAC,EAAAnD,EACA,GAAAmD,EAAA,CAGA,IAAAC,EAAAC,EAAAT,KAAAC,MAAAzC,EACA,GAAA8C,GAAAE,EAAA,GACA,IAAAd,EAAAI,WAAA,WACAS,EAAAjB,UAAAO,OAAAL,GACA7B,EAAAiC,OAAAW,IACaE,GACb9C,EAAA+C,IAAAH,EAAAb,QAGAa,EAAAjB,UAAAO,OAAAL,IAGArC,EAAAwD,KAAAC,iBAAA,QAAA/C,GAAA,GACAV,EAAAwD,KAAAC,iBAAA,4BACAlD,GAAA,EACAe,MAEAtB,EAAAwD,KAAAC,iBAAA,0BACAlD,GAAA,IAEAP,EAAAwD,KAAAC,iBAAA,qBAAAnC,GACAtB,EAAAyD,iBAAA,aAAA3C,GAAA,GACAd,EAAAyD,iBAAA,cAAAxC,GAAA,GACAjB,EAAAyD,iBAAA,WAAAxC,GAAA,GACAjB,EAAAyD,iBAAA,YAAAtC,GAAA,GACAnB,EAAAyD,iBAAA,UAAApC,GAAA,GAEA,SAAAM,EAAAhB,GACA,IAAAA,EAAA+C,aAUA,OAAA/C,EAAAgD,OAAAC,QAAA,qBARA,IADA,IAAAC,EAAAlD,EAAA+C,eACAI,EAAA,EAAuBA,EAAAD,EAAAE,OAAA,EAAqBD,IAAA,CAC5C,IAAAjC,EAAAgC,EAAAC,GACA,GAAAjC,EAAAmC,cAAAnC,EAAAmC,aAAA,mBACA,OAAAnC,GAQA,SAAAoB,EAAApB,GACA,GAAAA,EAAAoC,WAAA,CACA,IAAAC,EAAArC,EAAAoC,WAAAE,cAAA,qBACA,GAAAD,EACA,OAAAA,EAGA,OAAArC,EAAAsC,cAAA,qBAEA,IAAA9B,EAAA,YACAO,EAAA,IACAU,EAAA,IACAlD,EAAA","file":"js/chunk-2d20f2cd.f0f856b5.js","sourcesContent":["import { c as now, l as pointerCoord } from './chunk-e7816c0b.js';\nfunction startTapClick(doc) {\n    var lastTouch = -MOUSE_WAIT * 10;\n    var lastActivated = 0;\n    var cancelled = false;\n    var scrolling = false;\n    var activatableEle;\n    var activeDefer;\n    var clearDefers = new WeakMap();\n    function onBodyClick(ev) {\n        if (cancelled || scrolling) {\n            ev.preventDefault();\n            ev.stopPropagation();\n        }\n    }\n    function onTouchStart(ev) {\n        lastTouch = now(ev);\n        pointerDown(ev);\n    }\n    function onTouchEnd(ev) {\n        lastTouch = now(ev);\n        pointerUp(ev);\n    }\n    function onMouseDown(ev) {\n        var t = now(ev) - MOUSE_WAIT;\n        if (lastTouch < t) {\n            pointerDown(ev);\n        }\n    }\n    function onMouseUp(ev) {\n        var t = now(ev) - MOUSE_WAIT;\n        if (lastTouch < t) {\n            pointerUp(ev);\n        }\n    }\n    function cancelActive() {\n        clearTimeout(activeDefer);\n        activeDefer = undefined;\n        if (activatableEle) {\n            removeActivated(false);\n            activatableEle = undefined;\n        }\n        cancelled = true;\n    }\n    function pointerDown(ev) {\n        if (activatableEle || scrolling) {\n            return;\n        }\n        cancelled = false;\n        setActivatedElement(getActivatableTarget(ev), ev);\n    }\n    function pointerUp(ev) {\n        if (scrolling) {\n            return;\n        }\n        setActivatedElement(undefined, ev);\n        if (cancelled && ev.cancelable) {\n            ev.preventDefault();\n        }\n    }\n    function setActivatedElement(el, ev) {\n        if (el && el === activatableEle) {\n            return;\n        }\n        clearTimeout(activeDefer);\n        activeDefer = undefined;\n        var _a = pointerCoord(ev), x = _a.x, y = _a.y;\n        if (activatableEle) {\n            if (clearDefers.has(activatableEle)) {\n                throw new Error('internal error');\n            }\n            if (!activatableEle.classList.contains(ACTIVATED)) {\n                addActivated(activatableEle, x, y);\n            }\n            removeActivated(true);\n        }\n        if (el) {\n            var deferId = clearDefers.get(el);\n            if (deferId) {\n                clearTimeout(deferId);\n                clearDefers.delete(el);\n            }\n            el.classList.remove(ACTIVATED);\n            activeDefer = setTimeout(function () {\n                addActivated(el, x, y);\n                activeDefer = undefined;\n            }, ADD_ACTIVATED_DEFERS);\n        }\n        activatableEle = el;\n    }\n    function addActivated(el, x, y) {\n        lastActivated = Date.now();\n        el.classList.add(ACTIVATED);\n        var rippleEffect = getRippleEffect(el);\n        if (rippleEffect && rippleEffect.addRipple) {\n            rippleEffect.addRipple(x, y);\n        }\n    }\n    function removeActivated(smooth) {\n        var active = activatableEle;\n        if (!active) {\n            return;\n        }\n        var time = CLEAR_STATE_DEFERS - Date.now() + lastActivated;\n        if (smooth && time > 0) {\n            var deferId = setTimeout(function () {\n                active.classList.remove(ACTIVATED);\n                clearDefers.delete(active);\n            }, CLEAR_STATE_DEFERS);\n            clearDefers.set(active, deferId);\n        }\n        else {\n            active.classList.remove(ACTIVATED);\n        }\n    }\n    doc.body.addEventListener('click', onBodyClick, true);\n    doc.body.addEventListener('ionScrollStart', function () {\n        scrolling = true;\n        cancelActive();\n    });\n    doc.body.addEventListener('ionScrollEnd', function () {\n        scrolling = false;\n    });\n    doc.body.addEventListener('ionGestureCaptured', cancelActive);\n    doc.addEventListener('touchstart', onTouchStart, true);\n    doc.addEventListener('touchcancel', onTouchEnd, true);\n    doc.addEventListener('touchend', onTouchEnd, true);\n    doc.addEventListener('mousedown', onMouseDown, true);\n    doc.addEventListener('mouseup', onMouseUp, true);\n}\nfunction getActivatableTarget(ev) {\n    if (ev.composedPath) {\n        var path = ev.composedPath();\n        for (var i = 0; i < path.length - 2; i++) {\n            var el = path[i];\n            if (el.hasAttribute && el.hasAttribute('ion-activatable')) {\n                return el;\n            }\n        }\n    }\n    else {\n        return ev.target.closest('[ion-activatable]');\n    }\n}\nfunction getRippleEffect(el) {\n    if (el.shadowRoot) {\n        var ripple = el.shadowRoot.querySelector('ion-ripple-effect');\n        if (ripple) {\n            return ripple;\n        }\n    }\n    return el.querySelector('ion-ripple-effect');\n}\nvar ACTIVATED = 'activated';\nvar ADD_ACTIVATED_DEFERS = 200;\nvar CLEAR_STATE_DEFERS = 200;\nvar MOUSE_WAIT = 2500;\nexport { startTapClick };\n"],"sourceRoot":""}